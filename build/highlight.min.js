function ajaxGET(e,t,n){var r=new XMLHttpRequest;r.onreadystatechange=function(){4==r.readyState&&200==r.status&&t(r.responseText,n)},r.open("GET",e,!0),r.send()}var Match=function(e,t,n,r,i,a){this.index=e,this.classes=t,this.type=n,this.length=r,this.match=i,this.precedence=a},RegexHighlighter=function(e){this.returnClassName=e,"undefined"==typeof this.returnClassName&&(this.returnClassName="regex-highlight")};RegexHighlighter.prototype.sortArrayByObjectsIndex=function(e){e.sort(function(e,t){return e.index==t.index?e.precedence-t.precedence:e.index-t.index})},RegexHighlighter.prototype.removeDuplicateObjectsFromArray=function(e,t){for(var n=1;n<e.length;n++){var r=t(e[n-1],e[n]);0!=r&&(0>r?(e.splice(n-1,1),n--):(e.splice(n,1),n--))}},RegexHighlighter.prototype.wrapTextWithSpan=function(e,t,n,r){if("undefined"==typeof e)return!1;"undefined"==typeof t&&(t=""),"undefined"==typeof n&&(n=0),"undefined"==typeof r&&(r=e.length);var i=e.substring(0,n),a=e.substring(n,r),s=e.substring(r);return i+"<span class='"+t+"'>"+a+"</span>"+s},RegexHighlighter.prototype.getMatchesArrayFromRegex=function(e,t){var n=[],r=1;for(var i in e){var a,s=e[i],h=s.regexes;if(s.precedence){if(isNaN(s.precedence)){for(var g=!1,c=0;c<n.length;c++)if(s.precedence==n[c].type){a=n[c].precedence,g=!0;break}g||(a=r)}else a=parseInt(s.precedence);r--}else a=r;for(var c=0;c<h.length;c++){var o,l;"string"==typeof h[c]?(o=h[c],l=0):(o=h[c].regexString,l=h[c].captureGroup);var p=this.findRegexMatches(t,o,l,i,a);n.push.apply(n,p)}r++}return n},RegexHighlighter.prototype.findRegexMatches=function(e,t,n,r,i){for(var a=[],s=new RegExp(t,"gm");match=s.exec(e);){var h=match.index;n>=match.length&&(n=0);var g=match[n],c=match[0].indexOf(g);matchObject=new Match(h+c,this.returnClassName+" "+r,r,g.length,g,i),a.push(matchObject)}return a},RegexHighlighter.prototype.defaultDuplicateFunction=function(e,t){return e.index==t.index?e.precedence==t.precedence?e.length==t.length?-1:e.length-t.length:e.precedence-t.precedence:t.index>e.index&&t.index+t.length<e.index+e.length?1:t.index>e.index&&t.index<e.index+e.length&&t.index+t.length>=e.index+e.length?e.precedence!=t.precedence?e.precedence-t.precedence:e.length!=t.length?e.length-t.length:-1:0},RegexHighlighter.prototype.insertSyntaxHighlighting=function(e,t,n){"undefined"==typeof n&&(n=this.defaultDuplicateFunction);var r=this.getMatchesArrayFromRegex(e,t);return this.sortArrayByObjectsIndex(r),this.removeDuplicateObjectsFromArray(r,n),this.assembleNewStringFromMatchArray(t,r)},RegexHighlighter.prototype.insertSyntaxHighlightingByClass=function(e,t){if("undefined"==typeof e)return!1;"undefined"==typeof t&&(t="regex-color");for(var n=document.getElementsByClassName(t),r=0;r<n.length;r++){var i=n[r],a=i.innerHTML;result=this.insertSyntaxHighlighting(e,a),result&&(i.innerHTML=result)}return!0},RegexHighlighter.prototype.loadSyntaxHighlightingByClass=function(e,t){"undefined"==typeof t&&(t="languages/"),"undefined"==typeof e&&(e="regex-color");for(var n=document.getElementsByClassName(e),r=0;r<n.length;r++){var i=n[r],a=i.className.split(" ");if(a.length>1){var s=a[1];ajaxGET(t+s+".json",function(e,t){var n=JSON.parse(e),r=this.insertSyntaxHighlighting(n,t.innerHTML);r&&(t.innerHTML=r)}.bind(this),i)}}},RegexHighlighter.prototype.assembleNewStringFromMatchArray=function(e,t){for(var n=0,r=0;r<t.length;r++){var i=t[r],a=i.index+n,s=i.classes,h=i.length;e=this.wrapTextWithSpan(e,s,a,a+h),n+=("<span class=''></span>"+s).length}return e};
