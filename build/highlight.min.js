function ajaxGET(e,t,n){var r=new XMLHttpRequest;r.onreadystatechange=function(){4==r.readyState&&200==r.status&&t(r.responseText,n)},r.open("GET",e,!0),r.send()}var Match=function(e,t,n,r,i,a){this.index=e,this.classes=t,this.type=n,this.length=r,this.match=i,this.precedence=a},RegexHighlighter=function(e){this.returnClassName=e,"undefined"==typeof this.returnClassName&&(this.returnClassName="regex-highlight")};RegexHighlighter.prototype.sortArrayByObjectsIndex=function(e){e.sort(function(e,t){return e.index==t.index?e.precedence-t.precedence:e.index-t.index})},RegexHighlighter.prototype.removeDuplicateObjectsFromArray=function(e,t){for(var n=1;n<e.length;n++){var r=t(e[n-1],e[n]);0!=r&&(0>r?(e.splice(n-1,1),n--):(e.splice(n,1),n--))}},RegexHighlighter.prototype.wrapTextWithSpan=function(e,t,n,r){if("undefined"==typeof e)return!1;"undefined"==typeof t&&(t=""),"undefined"==typeof n&&(n=0),"undefined"==typeof r&&(r=e.length);var i=e.substring(0,n),a=e.substring(n,r),h=e.substring(r);return i+"<span class='"+t+"'>"+a+"</span>"+h},RegexHighlighter.prototype.getMatchesArrayFromRegex=function(e,t){for(var n=[],r=1,i=0;i<e.length;i++){var a,h=e[i],s=h.type,g=h.regexes;if(h.precedence){if(isNaN(h.precedence)){for(var c=!1,l=0;l<n.length;l++)if(h.precedence==n[l].type){a=n[l].precedence,c=!0;break}c||(a=r)}else a=parseInt(h.precedence);r--}else a=r;for(var l=0;l<g.length;l++){var o,p;"string"==typeof g[l]?(o=g[l],p=0):(o=g[l].regexString,p=g[l].captureGroup);var d=this.findRegexMatches(t,o,p,s,a);n.push.apply(n,d)}r++}return n},RegexHighlighter.prototype.findRegexMatches=function(e,t,n,r,i){for(var a=[],h=new RegExp(t,"gm");match=h.exec(e);){var s=match.index;n>=match.length&&(n=0);var g=match[n],c=match[0].indexOf(g);matchObject=new Match(s+c,this.returnClassName+" "+r,r,g.length,g,i),a.push(matchObject)}return a},RegexHighlighter.prototype.defaultDuplicateFunction=function(e,t){return e.index==t.index?e.precedence==t.precedence?e.length==t.length?-1:e.length-t.length:e.precedence-t.precedence:t.index>e.index&&t.index+t.length<e.index+e.length?1:t.index>e.index&&t.index<e.index+e.length&&t.index+t.length>=e.index+e.length?e.precedence!=t.precedence?e.precedence-t.precedence:e.length!=t.length?e.length-t.length:-1:0},RegexHighlighter.prototype.insertSyntaxHighlighting=function(e,t,n){"undefined"==typeof n&&(n=this.defaultDuplicateFunction);var r=this.getMatchesArrayFromRegex(e,t);return this.sortArrayByObjectsIndex(r),this.removeDuplicateObjectsFromArray(r,n),this.assembleNewStringFromMatchArray(t,r)},RegexHighlighter.prototype.insertSyntaxHighlightingByClass=function(e,t){if("undefined"==typeof e)return!1;"undefined"==typeof t&&(t="regex-color");for(var n=document.getElementsByClassName(t),r=0;r<n.length;r++){var i=n[r],a=i.innerHTML;result=this.insertSyntaxHighlighting(e,a),result&&(i.innerHTML=result)}return!0},RegexHighlighter.prototype.loadSyntaxHighlightingByClass=function(e,t){"undefined"==typeof t&&(t="languages/"),"undefined"==typeof e&&(e="regex-color");for(var n=document.getElementsByClassName(e),r=0;r<n.length;r++){var i=n[r],a=i.className.split(" ");if(a.length>1){var h=a[1];ajaxGET(t+h+".json",function(e,t){var n=JSON.parse(e),r=this.insertSyntaxHighlighting(n,t.innerHTML);r&&(t.innerHTML=r)}.bind(this),i)}}},RegexHighlighter.prototype.assembleNewStringFromMatchArray=function(e,t){for(var n=0,r=0;r<t.length;r++){var i=t[r],a=i.index+n,h=i.classes,s=i.length;e=this.wrapTextWithSpan(e,h,a,a+s),n+=("<span class=''></span>"+h).length}return e};
