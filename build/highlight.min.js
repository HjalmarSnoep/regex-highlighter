function loadSyntaxHighlightingByClass(e,n){"undefined"==typeof n&&(n="languages/"),"undefined"==typeof e&&(e="regex-color");for(var r=document.getElementsByClassName(e),t=0;t<r.length;t++){var i=r[t],c=i.className.split(" ");c.length>1&&(language=c[1],ajaxGET(n+language+".json",function(e,n){var r=JSON.parse(e);result=insertSyntaxHighlighting(r,n.innerHTML),result&&(n.innerHTML=result)},i))}}function insertSyntaxHighlightingByClass(e,n){if("undefined"==typeof e)return!1;"undefined"==typeof n&&(n="regex-highlight");for(var r=document.getElementsByClassName(n),t=0;t<r.length;t++){var i=r[t],c=i.innerHTML;result=insertSyntaxHighlighting(e,c),result&&(i.innerHTML=result)}return!0}function insertSyntaxHighlighting(e,n,r,t){"undefined"==typeof r&&(r="regex-highlight"),"undefined"==typeof t&&(t=function(e,n){return e.index==n.index?e.precidence==n.precidence?e.length==n.length?-1:e.length-n.length:e.precidence-n.precidence:n.index>e.index&&n.index+n.length<e.index+e.length?1:n.index>e.index&&n.index<e.index+e.length&&n.index+n.length>=e.index+e.length?e.precidence!=n.precidence?e.precidence-n.precidence:e.length!=n.length?e.length-n.length:-1:0});var i=getMatchesArrayFromRegex(e,n,r);return sortArrayByObjectsIndex(i),removeDuplicateObjectsFromArray(i,t),assembleNewStringFromMatchArray(n,i)}function getMatchesArrayFromRegex(e,n,r){var t=[],i=1;for(var c in e){for(var a=e[c],s=a.regexes,g=0;g<s.length;g++){regex=s[g];for(var d=new RegExp(regex,"gm");match=d.exec(n);){var l=match.index,h=match[match.length-1];if("undefined"!=typeof h){if(a.precedence)if(isNaN(a.precedence)){for(var p=!1,g=0;g<t.length;g++)if(a.precedence==t[g].type){precedence=t[g].precedence,i--,p=!0;break}p||(precedence=i)}else precedence=parseInt(a.precedence),i--;else precedence=i;object={index:l,classes:r+" "+c,type:c,length:h.length,match:h,precedence:precedence},t.push(object)}}}i++}return t}function sortArrayByObjectsIndex(e){e.sort(function(e,n){return e.index==n.index?e.precedence==n.precedence?0:e.precedence-n.precedence:e.index-n.index})}function removeDuplicateObjectsFromArray(e,n){for(var r=1;r<e.length;r++){var t=n(e[r-1],e[r]);0!=t&&(0>t?(e.splice(r-1,1),r--):(e.splice(r,1),r--))}}function assembleNewStringFromMatchArray(e,n){for(var r=0,t=0;t<n.length;t++){var i=n[t],c=i.index,a=i.classes,s=i.length;e=wrapTextWithSpan(e,c+r,c+s+r,a),r+=("<span class=''></span>"+a).length}return e}function wrapTextWithSpan(e,n,r,t){var i=e.substring(0,n),c=e.substring(n,r),a=e.substring(r);return i+"<span class='"+t+"'>"+c+"</span>"+a}function ajaxGET(e,n,r){var t=new XMLHttpRequest;t.onreadystatechange=function(){4==t.readyState&&200==t.status&&n(t.responseText,r)},t.open("GET",e,!0),t.send()}
